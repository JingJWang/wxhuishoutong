require=function e(t,i,n){function s(a,l){if(!i[a]){if(!t[a]){var c="function"==typeof require&&require;if(!l&&c)return c(a,!0);if(o)return o(a,!0);var r=new Error("Cannot find module '"+a+"'");throw r.code="MODULE_NOT_FOUND",r}var d=i[a]={exports:{}};t[a][0].call(d.exports,function(e){var i=t[a][1][e];return s(i?i:e)},d,d.exports,e,t,i,n)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)s(n[a]);return s}({Bomb:[function(e,t,i){"use strict";cc._RFpush(t,"29d96F42z1IcrTiuxCfJKtn","Bomb"),cc.Class({"extends":cc.Component,properties:{ani:cc.Animation},init:function(e,t,i){this.esMgr=e,this.type=t,i>0?this.node.runAction(cc.sequence(cc.delayTime(i),cc.callFunc(this._play,this))):this._play()},_play:function(){this.ani.play("bomb")},onBombFinished:function(){this.node.destroy()}}),cc._RFpop()},{}],BulletMgr:[function(e,t,i){"use strict";cc._RFpush(t,"9dcd55eJEpBRYjqBl4zmH+S","BulletMgr");e("FragBullet"),e("RoleBullet"),e("GameMain"),cc.Class({"extends":cc.Component,properties:{bulletPrefab:cc.Prefab,fragbPrefab:cc.Prefab},init:function(e){this.game=e,this.runRoleBullets=[],this.idleRoleBullets=[],this.runEnemyBullets=[],this.idleEnemyBullets=[]},onLoad:function(){},update:function(e){var t,i;for(t=0;t<this.runRoleBullets.length;)i=this.runRoleBullets[t],i.willRemove?(i.node.parent=null,this.runRoleBullets.splice(t,1),this.idleRoleBullets.push(i)):(i.targets.length<i.hitMax&&this.game.enemyMgr.collisionDetection(i),t++);for(t=0;t<this.runEnemyBullets.length;)i=this.runEnemyBullets[t],i.willRemove?(i.reset(),this.runEnemyBullets.splice(t,1),this.idleEnemyBullets.push(i)):t++},getIdleRoleBullet:function(){if(this.idleRoleBullets.length>0){var e=this.idleRoleBullets.pop();return e}return null},fireRoleBullet:function(e){var t=this.getIdleRoleBullet();null===t&&(t=cc.instantiate(this.bulletPrefab).getComponent("RoleBullet")),t.reset(),t.node.position=e,this.game.enemyLayer.addChild(t.node),this.runRoleBullets.push(t)},getIdleEnemyBullet:function(e){var t;for(t=0;t<this.idleEnemyBullets.length;){var i=this.idleEnemyBullets[t];if(i.enemyType==e)return this.idleEnemyBullets.splice(t,1),i;t++}return null},fireEnemyBullet:function(e,t,i){var n=this.getIdleEnemyBullet(e);null===n&&(n=cc.instantiate(this.fragbPrefab).getComponent("FragBullet"),n.init(this.game,e,i)),n.fire(),n.node.position=t,this.game.enemyLayer.addChild(n.node),this.runEnemyBullets.push(n)}});cc._RFpop()},{FragBullet:"FragBullet",GameMain:"GameMain",RoleBullet:"RoleBullet"}],ButtonScaler:[function(e,t,i){"use strict";cc._RFpush(t,"d58c4TJPyBE3KOxd9wT1QCt","ButtonScaler"),cc.Class({"extends":cc.Component,properties:{scale:1,duration:0},onLoad:function(){function e(e){this.stopAllActions(),this.runAction(i.scaleDownAction)}function t(e){this.stopAllActions(),this.runAction(i.scaleUpAction)}var i=this;i.initScale=this.node.scale,i.button=i.getComponent(cc.Button),i.scaleDownAction=cc.scaleTo(i.duration,i.scale),i.scaleUpAction=cc.scaleTo(i.duration,i.initScale),this.node.on("touchstart",e,this.node),this.node.on("touchend",t,this.node),this.node.on("touchcancel",t,this.node)}}),cc._RFpop()},{}],CmdApi:[function(e,t,i){"use strict";cc._RFpush(t,"c15dckM5UNHZaD70uGDyzNV","CmdApi");var n={TYPE_CS:"CS",TYPE_SC:"SC",mUrl:"",mVersion:"",init:function(e,t){this.mUrl=e,this.mVersion=t},send:function(e,t,i,n){var s="sign",o={data:{cmd:e,params:t},type:this.TYPE_CS,version:this.mVersion,sign:s},a=JSON.stringify(o);this._sendData(this.mUrl,a,function(e,t){if(200==e){var s=JSON.parse(t),o=s.smartparking;null!==o&&i(o.data.cmd,o.data.result,o.data.params,n)}},!1,!0)},_sendData:function(e,t,i,n,s){var o;o=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),o.onreadystatechange=function(){switch(o.readyState){case 4:if(200==o.status){var e=o.responseText;i(o.status,e)}else 404==o.status?i(o.status,o.statusText):i(o.status,o.statusText);break;case 0:break;case 1:break;case 2:break;case 3:}},n?(null!==t&&(e=e+"?"+t),o.open("GET",e,s),o.send()):(o.open("POST",e,s),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send("smartparking="+t))}};t.exports=n,cc._RFpop()},{}],CurRound:[function(e,t,i){"use strict";cc._RFpush(t,"ab821RbK19C/rmz+TKdTN0S","CurRound");var n=e("Types").SkillType,s=cc.Class({"extends":cc.Component,properties:{},statics:{instance:null},onLoad:function(){s.instance=this},reset:function(){this.gold=0,this.kill=0,this.gone=0,this.life=1e3+50*window.Global.skillLevel[n.base],this.lifeCur=this.life,this.monsterBatch=7,this.totalNum=0,this.monsterNum=[];var e,t;for(e=0;e<this.monsterBatch;e++)t=this._monsterCount(e),this.monsterNum.push(t),this.totalNum+=t;var i=Math.ceil(this.totalNum/7);for(this.singleNum=[],e=0;e<this.monsterBatch+1;e++)t=Math.random()*Math.min(14,i)|1,this.singleNum.push(t),this.totalNum+=t;cc.log("totalNum="+this.totalNum),window.Global.stage%10===0&&this.totalNum++,this.bombInterval=(5e3-500*window.Global.skillLevel[n.bomb])/1e3,this.shootSpeed=Math.max(.05,(500-15*window.Global.skillLevel[n.speed])/1e3),this.gun=window.Global.skillLevel[n.burst]>0?3:window.Global.skillLevel[n.dual]>0?2:1},_monsterCount:function(e){if(e>6)return Math.ceil((5+window.Global.stage)/6)+2;switch(e){case 0:return(3+window.Global.stage)/7+1|0;case 1:return(1+window.Global.stage)/6+1|0;case 2:return(2+window.Global.stage)/6+2|0;case 3:return(6+window.Global.stage)/8+1|0;case 4:return(5+window.Global.stage)/7+1|0;case 5:return(4+window.Global.stage)/6+1|0;case 6:return(5+window.Global.stage)/6+2|0}return 0}});cc._RFpop()},{Types:"Types"}],EnemyMgr:[function(e,t,i){"use strict";cc._RFpush(t,"cbd10Me8PtNb5HPcCzUjt9g","EnemyMgr");var n=e("Types").EnemyType,s=e("Types").EnemyState,o=(e("EnemySprite"),e("Types").gRandomPos);cc.Class({"extends":cc.Component,properties:{enemyPrefab:cc.Prefab},init:function(e){this.game=e,this.idleMonsters=[],this.runMonsters=[]},update:function(e){for(var t,i=0;i<this.runMonsters.length;)t=this.runMonsters[i],t.state==s.dead?(this.runMonsters.splice(i,1),this.idleMonsters.push(t)):i++},collisionDetection:function(e){for(var t,i=0;i<this.runMonsters.length&&(t=this.runMonsters[i],t.state==s.dying||t.state==s.dead||!e.hitEnemy(t));i++);},addMonster:function(e,t,i){cc.log("EnemyMgr.addMonster style="+e+",type="+t+", count="+i);var s=[];t==n.tank&&(i=1);var o,a,l=0;for(a=0;a<this.idleMonsters.length;)if(o=this.idleMonsters[a],o.type==t){if(this.idleMonsters.splice(a,1),o.reset(),s.push(o),l++,l==i)break}else a++;for(a=l;i>a;a++)o=cc.instantiate(this.enemyPrefab).getComponent("EnemySprite"),o.init(this.game,t),s.push(o);this._monsterFormation(e,s,t)},_monsterFormation:function(e,t,i){if(i==n.tank){var s=3*Math.random()|1;switch(s){case 1:this._addBossLeft(t,120);break;case 2:this._addBossMid(t,120);break;case 3:this._addBossRight(t,120)}}else if(1==e)this._addEnemyRandom(t);else{var o=1;switch(o=3*Math.random()|1){case 1:this._addEnemyHori(t,50);break;case 2:this._addEnemyArrow(t,50);break;case 3:this._addEnemyCross(t,50);break;case 4:this._addEnemyVert(t,50)}}for(var a,l=0;l<t.length;l++)a=t[l],a.node.x-=240,a.node.y-=400,this.game.enemyLayer.addChild(a.node),a.run(),this.runMonsters.push(a)},_addEnemyRandom:function(e){for(var t,i=o(14),n=0;n<e.length;n++)t=e[n],i[n]>6?t.node.position=cc.p(60+60*(i[n]-7),915):t.node.position=cc.p(60+60*i[n],850)},_addEnemyVert:function(e,t){var i,n=0,s=850,o=e.length,a=o/5;n=100*Math.random()|30;for(var l=0;o>l;l++)i=e[l],i.node.position=cc.p(n,s+60*(0===a?l:l%a)),0!==a&&l%a===0&&0!==l&&(n+=60)},_addEnemyHori:function(e,t){for(var i=60,n=240,s=e.length,o=0,a=0;s>a;a++)a%7===0&&0!==a&&(n=240,i=60,o++),e[a].node.setPosition(n+=(i*=-1)*(a%7),850+50*o)},_addEnemyArrow:function(e,t){for(var i=60,n=240,s=850,o=0,a=0;a<e.length;a++)a%7===0&&0!==a&&(i=60,n=240,o++),e[a].node.setPosition(n+=(i*=-1)*(a%7),s+11*a)},_addEnemyCross:function(e,t){for(var i=60,n=240,s=850,o=e.length,a=0,l=13,c=0;o>c;c++){var r=e[c];c%13==7?(i=60,n=210,a++,l=c):c%13===0&&0!==c&&(i=60,n=240,a++,l=c),r.node.setPosition(n+=(i*=-1)*(c%l),s+60*a)}},_addBossMid:function(e,t){for(var i=240,n=0;n<e.length;n++)e[n].node.setPosition(i+=(t*=-1)*n,880)},_addBossLeft:function(e,t){for(var i=0;i<e.length;i++)e[i].node.setPosition(120+t*i,880)},_addBossRight:function(e,t){for(var i=0;i<e.length;i++)e[i].node.setPosition(360-t*i,880)}});cc._RFpop()},{EnemySprite:"EnemySprite",Types:"Types"}],EnemySprite:[function(e,t,i){"use strict";cc._RFpush(t,"3880ceHuuZGV4XUBgoKG3wu","EnemySprite");var n=e("Types").EnemyState,s=e("Types").EnemyType,o=e("Types").EnemyInfo,a=e("CurRound");e("GameMain"),cc.Class({"extends":cc.Component,properties:{state:n.run,barbg:cc.Node,bloodbar:cc.ProgressBar,critical:cc.Node,ani:cc.Animation,sdE0:cc.AudioClip,sdE1:cc.AudioClip,sdE2:cc.AudioClip,sdE3:cc.AudioClip,sdE4:cc.AudioClip},init:function(e,t){switch(this.game=e,this.type=t,this.esi=o[t],t){case s.normal:this.blood=220*(1+window.Global.stage/25)*1.15|0,this.hurt=30;break;case s.frag:this.blood=350*(1+window.Global.stage/25)*1.15|0,this.hurt=20;break;case s.bomber:this.blood=180*(1+window.Global.stage/25)*1.15|0,this.hurt=40;break;case s.shield:this.blood=500*(1+window.Global.stage/25)*1.15|0,this.hurt=15;break;case s.tank:this.blood=7e3*(1+window.Global.stage/25)*1.15|0,this.hurt=60}this.curBlood=this.blood,this.barbg.active=!1,this.reset()},update:function(e){if(this.state==n.run){var t=this.node.y;t-=this.esi.speed*e,this.node.y=t,t<=this.esi.maxRun-400&&(t=this.esi.maxRun-400,this.attack())}},reset:function(){this.criticalShow=!1,this.critical.active=!1,this.barbg.active=!1,this.bloodbar.progress=1,this.curBlood=this.blood,this.state=n.run},run:function(){this.state=n.run,this.ani.stop(),this.ani.play(this.type+"_run")},attack:function(){this.state=n.atk,this.ani.stop(),this.ani.play(this.type+"_atk",0)},death:function(){this.state=n.dying,this.barbg.active=!1,this.critical.active=!1,this.ani.stop(),this.node.stopAllActions(),this.ani.play(this.type+"_die")},onAtkFinished:function(){this.type==s.frag?(window.Global.sound&&cc.audioEngine.playEffect(this.sdE1),this.game.bulletMgr.fireEnemyBullet(this.type,cc.p(this.node.x+20,this.node.y),this.hurt),this.node.runAction(cc.sequence(cc.delayTime(this.esi.rate),cc.callFunc(this.attack,this)))):this.type==s.tank?(window.Global.sound&&cc.audioEngine.playEffect(this.sdE4),this.game.bulletMgr.fireEnemyBullet(this.type,cc.p(this.node.x-5,this.node.y-50),this.hurt),this.node.runAction(cc.sequence(cc.delayTime(this.esi.rate),cc.callFunc(this.attack,this)))):this.type==s.shield?(window.Global.sound&&cc.audioEngine.playEffect(this.sdE3),a.instance.lifeCur=Math.max(0,a.instance.lifeCur-this.hurt),this.game.cityblood.progress=a.instance.lifeCur/a.instance.life,this.game.citybloodValue.string=a.instance.lifeCur+"",a.instance.lifeCur<=0?this.game._gameOver():this.node.runAction(cc.sequence(cc.delayTime(this.esi.rate),cc.callFunc(this.attack,this)))):this.type==s.normal?(window.Global.sound&&cc.audioEngine.playEffect(this.sdE0),a.instance.lifeCur=Math.max(0,a.instance.lifeCur-this.hurt),this.game.cityblood.progress=a.instance.lifeCur/a.instance.life,this.game.citybloodValue.string=a.instance.lifeCur+"",a.instance.lifeCur<=0?this.game._gameOver():this.node.runAction(cc.sequence(cc.delayTime(this.esi.rate),cc.callFunc(this.attack,this)))):this.type==s.bomber&&(window.Global.sound&&cc.audioEngine.playEffect(this.sdE2),this.state=n.dead,this.node.parent=null,a.instance.gone++,this.game.monsterCount.string=a.instance.totalNum-a.instance.gone,a.instance.lifeCur=Math.max(0,a.instance.lifeCur-this.hurt),this.game.cityblood.progress=a.instance.lifeCur/a.instance.life,this.game.citybloodValue.string=a.instance.lifeCur+"",a.instance.lifeCur<=0?this.game._gameOver():a.instance.totalNum==a.instance.gone&&this.game._success())},onDieFinished:function(){this.state=n.dead,a.instance.gone++,this.game.monsterCount.string=a.instance.totalNum-a.instance.gone,a.instance.totalNum==a.instance.gone&&this.game._success(),this.node.parent=null},onCritical:function(){this.critical.active=!1,this.criticalShow=!1},fallBlood:function(e,t,i){this.node.y>820||(this.barbg.active=!0,this.barbg.opacity=255,this.barbg.stopAllActions(),this.barbg.runAction(cc.sequence(cc.delayTime(.5),cc.fadeOut(.5),cc.hide())),this.node.runAction(cc.sequence(cc.tintTo(.1,255,0,0),cc.tintTo(.1,255,255,255))),i&&!this.criticalShow&&(this.criticalShow=!0,this.critical.stopAllActions(),this.critical.active=!0,this.critical.position=cc.p(15,20),this.critical.opacity=255,this.critical.runAction(cc.sequence(cc.moveBy(.3,cc.p(0,10)).easing(cc.easeBounceOut()),cc.fadeOut(.5),cc.callFunc(this.onCritical,this))),t*=1.5),this.curBlood-=t,this.curBlood<=0&&(this.curBlood=0,a.instance.gold+=this.esi.gold,this.game.gold.string=a.instance.gold,a.instance.kill++,this.death()),this.bloodbar.progress=this.curBlood/this.blood)},converNowRect:function(){var e=this.node.getBoundingBox();return e.x+=this.esi.range.x,e.y+=this.esi.range.y,e.width=this.esi.range.w,e.height=this.esi.range.h,e}});cc._RFpop()},{CurRound:"CurRound",GameMain:"GameMain",Types:"Types"}],FragBullet:[function(e,t,i){"use strict";cc._RFpush(t,"23dc6SCEQ5DZZovMKDLCyh8","FragBullet");var n=e("Types").EnemyType,s=e("CurRound");e("GameMain"),cc.Class({"extends":cc.Component,properties:{willRemove:!1,ani:cc.Animation,pic:cc.SpriteFrame,pics:{"default":[],type:cc.SpriteFrame},sdFrag:cc.AudioClip,sdTank:cc.AudioClip},update:function(e){},init:function(e,t,i){this.game=e,this.type=t,t==n.frag?this.pic=this.pics[0]:this.pic=this.pics[1],this.hurt=i},fire:function(){var e=this.type==n.frag?-350:-420;this.node.runAction(cc.sequence(cc.moveBy(1,cc.p(0,e)),cc.callFunc(this._moveDone,this))),this.type==n.frag?this.ani.play("fb_run"):this.ani.play("tb_run")},reset:function(){this.node.stopAllActions(),this.node.opacity=255,this.willRemove=!1},_moveDone:function(){this.ani.stop(),this.type==n.frag?(this.ani.play("fb_bomb"),window.Global.sound&&cc.audioEngine.playEffect(this.sdFrag)):(this.ani.play("tb_bomb"),window.Global.sound&&cc.audioEngine.playEffect(this.sdTank)),s.instance.lifeCur=Math.max(0,s.instance.lifeCur-this.hurt),this.game.cityblood.progress=s.instance.lifeCur/s.instance.life,this.game.citybloodValue.string=s.instance.lifeCur+"",s.instance.lifeCur<=0&&this.game._gameOver()},onEnemyBomb:function(){this.node.parent=null,this.willRemove=!0}});cc._RFpop()},{CurRound:"CurRound",GameMain:"GameMain",Types:"Types"}],GameMain:[function(e,t,i){"use strict";cc._RFpush(t,"280c3rsZJJKnZ9RqbALVwtK","GameMain");var n=e("Types").EnemyType,s=e("Types").SkillType,o=e("Types").EnemyState,a=e("Types").bombPosition,l=e("EnemyMgr"),c=(e("EnemySprite"),e("CurRound")),r=e("BulletMgr"),l=e("EnemyMgr"),d=e("CmdApi"),h=cc.Class({"extends":cc.Component,properties:{enemyLayer:cc.Node,enemyMgr:l,bulletMgr:r,isFire:!1,finished:!1,gun:cc.Node,cityblood:cc.ProgressBar,citybloodValue:cc.Label,monsterCount:cc.Label,gold:cc.Label,stageTip:cc.Label,fragProgress:cc.ProgressBar,bombProgress:cc.ProgressBar,fragCount:cc.Label,bombCount:cc.Label,btnFrag:cc.Button,btnBomb:cc.Button,bombPrefab:cc.Prefab,resultLayer:cc.Node,pauseLayer:cc.Node,tips:cc.Node,btnSound:cc.Button,pics:{"default":[],type:[cc.SpriteFrame]},sdShoulei:cc.AudioClip,sdBomb:cc.AudioClip,sdClick:cc.AudioClip,maskLayer:cc.Node},statics:{instance:null},onLoad:function(){h.instance=this;var e=this;cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:function(t,i){e.finished&&(e.dataSending=!0,e.sendData()),e.isFire=!0;var n=t.getLocation();return n=e.node.convertToNodeSpace(n),e.gun.x=n.x-240,!0},onTouchMoved:function(t,i){if(!e.finished){var n=t.getLocation();n=e.node.convertToNodeSpace(n),e.gun.x=n.x-240}},onTouchEnded:function(t,i){e.isFire=!1}},e.node),c.instance.reset(),this.batchNow=0,this.singleNow=0,this.finished=!1,this.isFire=!1,this.isPause=!1,this.bulletMgr.init(this),this.enemyMgr.init(this),this.cityblood.progress=1,this.citybloodValue.string=c.instance.lifeCur+"",this.monsterCount.string=c.instance.totalNum,this.gold.string=c.instance.gold,this.stageTip.string="第 "+window.Global.stage+" 关",this.fragProgress.progress=1,this.bombProgress.progress=1,this.fragCount.string=window.Global.frag+"",this.bombCount.string=window.Global.bomb+"",this.btnFrag.interactable=!1,this.btnBomb.interactable=!1,this.fragTime=0,this.bombTime=0,this.fragCDTime=2.5,this.bombCDTime=.5+(10-window.Global.skillLevel[s.bomb]),this.schedule(this._addSingleEnemy,6+window.Global.stage/25,cc.macro.REPEAT_FOREVER,2),this.schedule(this._releaseMonster,6+window.Global.stage/25,cc.macro.REPEAT_FOREVER,4)},update:function(e){this.finished||(this.btnFrag.interactable||(this.fragTime+=e,this.fragTime>=this.fragCDTime&&(this.fragTime=this.fragCDTime,this.btnFrag.interactable=!0),this.fragProgress.progress=1-this.fragTime/this.fragCDTime),this.btnBomb.interactable||(this.bombTime+=e,this.bombTime>=this.bombCDTime&&(this.bombTime=this.bombCDTime,this.btnBomb.interactable=!0),this.bombProgress.progress=1-this.bombTime/this.bombCDTime))},_releaseMonster:function(e){if(this.batchNow<c.instance.monsterBatch){var t=n.normal;window.Global.stage<10?2*Math.random()|!0&&(t=n.bomber):window.Global.stage<15?2*Math.random()|!0&&(t=2*Math.random()|2):window.Global.stage<20?2*Math.random()|!0&&(t=3*Math.random()|1):t=4*Math.random()|0,2==this.batchNow&&window.Global.stage%10===0&&this.enemyMgr.addMonster(0,n.tank,1),this.enemyMgr.addMonster(0,t,c.instance.monsterNum[this.batchNow]),this.batchNow++}else this.unschedule(this._releaseMonster)},_addSingleEnemy:function(){var e=n.normal;window.Global.stage<10?2*Math.random()|!0&&(e=n.bomber):window.Global.stage<15?2*Math.random()|!0&&(e=2*Math.random()|2):window.Global.stage<20?2*Math.random()|!0&&(e=3*Math.random()|1):e=4*Math.random()|0;var t=c.instance.singleNum[this.singleNow];this.singleNow++,this.singleNow>=c.instance.singleNum.length&&this.unschedule(this._addSingleEnemy),this.enemyMgr.addMonster(1,e,t)},onFrag:function(){this.btnFrag.interactable=!1,this.fragTime=0,this.fragProgress.progress=1,window.Global.frag--,this.fragCount.string=window.Global.frag+"",window.Global.sound&&cc.audioEngine.playEffect(this.sdShoulei);for(var e=0;3>e;e++){var t=cc.instantiate(this.bombPrefab);t.position=a[e],t.getComponent("Bomb").init(this.enemyMgr,0,0),this.enemyLayer.addChild(t)}this.node.runAction(cc.sequence(cc.delayTime(.8),cc.callFunc(this._onFragFinished,this)))},onBomb:function(){this.btnBomb.interactable=!1,this.bombTime=0,this.bombProgress.progress=1,window.Global.bomb--,this.bombCount.string=window.Global.bomb+"",window.Global.sound&&cc.audioEngine.playEffect(this.sdBomb);for(var e=0;15>e;e++){var t=cc.instantiate(this.bombPrefab);t.position=a[e],t.getComponent("Bomb").init(this.enemyMgr,1,.1*(e/3|0)),this.enemyLayer.addChild(t)}this.node.runAction(cc.sequence(cc.delayTime(.8),cc.callFunc(this._onBombFinished,this)))},_onFragFinished:function(){for(var e=0;e<this.enemyMgr.runMonsters.length;e++){var t=this.enemyMgr.runMonsters[e];t.state!=o.dying&&t.state!=o.dead&&t.node.y<=-200&&t.fallBlood(t,50*window.Global.skillLevel[s.frag]+500,!1)}},_onBombFinished:function(){for(var e=0;e<this.enemyMgr.runMonsters.length;e++){var t=this.enemyMgr.runMonsters[e];t.state!=o.dying&&t.state!=o.dead&&t.node.y<=400&&t.fallBlood(t,8e3,!1)}},_success:function(){this.unscheduleAllCallbacks(),this.finished=!0,this.isFire=!1,window.Global.stage++;var e=c.instance.kill+50+9*window.Global.stage;window.Global.gold+=e;var t=window.Global.stage%2===0?1:0;window.Global.frag+=t;var i=window.Global.stage%4===0?1:0;window.Global.bomb+=i,this.tips.runAction(cc.sequence(cc.fadeOut(.5),cc.fadeIn(.5)).repeatForever()),this.resultLayer.active=!0,this.resultLayer.getChildByName("failedbg").active=!1,this.resultLayer.getChildByName("failed").active=!1,this.resultLayer.getChildByName("victorybg").active=!0,this.resultLayer.getChildByName("victory").active=!0,this.resultLayer.getChildByName("victory").runAction(cc.moveTo(1,cc.p(0,230)).easing(cc.easeIn(20))),this.resultLayer.getChildByName("kill").getComponent(cc.Label).string=c.instance.kill+"",this.resultLayer.getChildByName("life").getComponent(cc.Label).string=(100*c.instance.lifeCur/c.instance.life|0)+"%",this.resultLayer.getChildByName("frag").getComponent(cc.Label).string="+"+t,this.resultLayer.getChildByName("bomb").getComponent(cc.Label).string="+"+i,this.resultLayer.getChildByName("reward").getComponent(cc.Label).string="+"+e},_gameOver:function(){for(var e=0;e<this.enemyMgr.runMonsters.length;e++){var t=this.enemyMgr.runMonsters[e];t.node.active=!1,t.ani.stop(),t.node.stopAllActions()}this.unscheduleAllCallbacks(),this.finished=!0,this.isFire=!1;var i=2*c.instance.kill;window.Global.gold+=i;var n=0===(3*Math.random()|0)?1:0;cc.log(window.Global.frag),this.tips.runAction(cc.sequence(cc.fadeOut(.5),cc.fadeIn(.5)).repeatForever()),this.resultLayer.active=!0,this.resultLayer.getChildByName("failedbg").active=!0,this.resultLayer.getChildByName("failed").active=!0,this.resultLayer.getChildByName("victorybg").active=!1,this.resultLayer.getChildByName("victory").active=!1,this.resultLayer.getChildByName("failed").opacity=0,this.resultLayer.getChildByName("failed").runAction(cc.fadeIn(1)),this.resultLayer.getChildByName("kill").getComponent(cc.Label).string=c.instance.kill+"",this.resultLayer.getChildByName("life").getComponent(cc.Label).string="0",this.resultLayer.getChildByName("frag").getComponent(cc.Label).string="+"+n,this.resultLayer.getChildByName("bomb").getComponent(cc.Label).string="+0",this.resultLayer.getChildByName("reward").getComponent(cc.Label).string="+"+i},onPause:function(){window.Global.sound&&cc.audioEngine.playEffect(this.sdClick),this.isPause||(this.isPause=!0,this.btnSound.getComponent(cc.Sprite).spriteFrame=window.Global.sound?this.pics[0]:this.pics[1],cc.director.pause(),this.pauseLayer.active=!0)},onSound:function(){window.Global.sound=!window.Global.sound,this.btnSound.getComponent(cc.Sprite).spriteFrame=window.Global.sound?this.pics[0]:this.pics[1]},onBack:function(){window.Global.sound&&cc.audioEngine.playEffect(this.sdClick),this.sendData()},onStart:function(){window.Global.sound&&cc.audioEngine.playEffect(this.sdClick),this.isPause=!1,this.pauseLayer.active=!1,cc.director.resume()},sendData:function(){this.dataSending=!0;for(var e={openid:window.Global.openid,stage:window.Global.stage,gold:window.Global.gold,frag:window.Global.frag,bomb:window.Global.bomb,skill:[]},t=0;10>t;t++)e.skill[t]=window.Global.skillLevel[t];d.send("SetInfo",e,this.onReceive,this),cc.log("GameMain.sendData"),cc.log(e)},onReceive:function(e,t,i,n){cc.director.resume(),cc.director.loadScene("skill")}});cc._RFpop()},{BulletMgr:"BulletMgr",CmdApi:"CmdApi",CurRound:"CurRound",EnemyMgr:"EnemyMgr",EnemySprite:"EnemySprite",Types:"Types"}],GlobalData:[function(e,t,i){"use strict";cc._RFpush(t,"c723fWnWtlIpZxOUqNGcMCF","GlobalData"),window.Global={gold:0,stage:20,skillLevel:[],bomb:20,frag:10},cc._RFpop()},{}],Logo:[function(e,t,i){"use strict";cc._RFpush(t,"56d58qMhE5Ev6ypSF/9v4N/","Logo");var n=e("WXSdk").WXinit,s=e("Types").getUrlParam,o=e("CmdApi");cc.Class({"extends":cc.Component,properties:{btnSound:cc.Button,sdClick:cc.AudioClip,pics:{"default":[],type:[cc.SpriteFrame]}},onLoad:function(){this.dataGetted=!1;var e;window.Global.openid=11125,window.Global.sound=!1,o.init("http://wx.recytl.com/view/diserver/www/json/Gateway.php","1.0.0");var t=s("code"),i=location.href.split("#")[0];e={code:t,url:encodeURIComponent(i)},o.send("LoginByWX",e,this.onReceive,this)},onSound:function(){window.Global.sound=!window.Global.sound,window.Global.sound&&cc.audioEngine.playEffect(this.sdClick),this.btnSound.getComponent(cc.Sprite).spriteFrame=window.Global.sound?this.pics[0]:this.pics[1]},onStart:function(){this.dataGetted?(window.Global.sound&&cc.audioEngine.playEffect(this.sdClick),cc.director.loadScene("skill")):cc.log("no data")},onReceive:function(e,t,i,s){var o;if("GetInfo"==e){for(window.Global.stage=parseInt(i.userData.stage),window.Global.gold=parseInt(i.userData.gold),window.Global.frag=parseInt(i.userData.frag),window.Global.bomb=parseInt(i.userData.bomb),o=0;10>o;o++)window.Global.skillLevel[o]=parseInt(i.userData.skill[o]);s.dataGetted=!0}else if("GetKeyByWX"==e)switch(i.result){case 0:i.signPackage.appId,i.signPackage.timestamp,i.signPackage.nonceStr,i.signPackage.signature}else if("LoginByWX"==e)switch(i.result){case 0:var a=i.wxUserInfo.openid;i.wxUserInfo.nickname;window.Global.openid=a,window.Global.stage=parseInt(i.userData.stage),window.Global.gold=parseInt(i.userData.gold),window.Global.frag=parseInt(i.userData.frag),window.Global.bomb=parseInt(i.userData.bomb);var l=i.signPackage;for(n(!1,l.appId,l.timestamp,l.noceStr,l.signature,["chooseWXPay"],function(){s.dataGetted=!0}),o=0;10>o;o++)window.Global.skillLevel[o]=parseInt(i.userData.skill[o])}}}),cc._RFpop()},{CmdApi:"CmdApi",Types:"Types",WXSdk:"WXSdk"}],RoleBullet:[function(e,t,i){"use strict";cc._RFpush(t,"27dbcWrTdpONbWfs+uf0pxJ","RoleBullet");var n=e("Types").SkillType,s=e("Types").EnemyType;cc.Class({"extends":cc.Component,properties:{hurt:0,targets:[],hitMax:0,willRemove:0,sdShield:cc.AudioClip},onLoad:function(){},update:function(e){this.node.y+=1e3*e,this.node.y>=850&&(this.willRemove=!0)},reset:function(){this.hitMax=1;var e=100*Math.random()|0;e<5*window.Global.skillLevel[n.pierce]&&(this.hitMax=2),this.willRemove=!1,this.targets=[],this.hurt=100+10*window.Global.skillLevel[n.power],window.Global.skillLevel[n.burst]>0?this.hurt=.5*this.hurt:window.Global.skillLevel[n.dual]>0&&(this.hurt=.6*this.hurt)},hitEnemy:function(e){if(this.targets.contains(e))return!1;if(cc.rectIntersectsRect(this.node.getBoundingBox(),e.converNowRect())){e.type==s.shield&&window.Global.sound&&cc.audioEngine.playEffect(this.sdShield),this.targets.push(e);var t=100*Math.random()|0,i=t<5*window.Global.skillLevel[n.critical];return e.fallBlood(e,this.hurt,i),this.targets.length>=this.hitMax&&(this.willRemove=!0),!0}return!1}}),cc._RFpop()},{Types:"Types"}],Skill:[function(e,t,i){"use strict";cc._RFpush(t,"abec5vVXOBAwKinFYrQ+q/V","Skill");var n=e("Types").SkillType,s=e("Types").SkillInfo,o=e("Types").SkillDesc,a=e("CmdApi");cc.Class({"extends":cc.Component,properties:{stage:cc.Label,coin:cc.Label,skillBtn:{"default":[],type:cc.Node},skillLevel:{"default":[],type:cc.Label},selectRect:cc.Sprite,explain:cc.Label,curLevel:cc.Label,nextLevel:cc.Label,needMoney:cc.Label,upgrade:cc.Button,upgradeString:cc.Label,fragCount:cc.Label,fragPrice:cc.Label,bombCount:cc.Label,bombPrice:cc.Label,sdBuy:cc.AudioClip,sdClick:cc.AudioClip,sdNoMoney:cc.AudioClip,shopLayer:cc.Node,maskLayer:cc.Node},onLoad:function(){this.stage.string="关卡: "+window.Global.stage,this.coin.string=window.Global.gold+"",this.bombP=200+10*window.Global.stage,this.fragP=50+5*window.Global.stage,this.fragCount.string=window.Global.frag+"",this.fragPrice.string=this.fragP,this.bombCount.string=window.Global.bomb+"",this.bombPrice.string=this.bombP,this.changeStage=0,this._updateItem(),this._selectItem(n.power)},onStart:function(){this.maskLayer.active=!0,window.Global.sound&&cc.audioEngine.playEffect(this.sdClick),this.changeStage=1,this.sendData()},sendData:function(){this.dataSending=!0;for(var e={openid:window.Global.openid,stage:window.Global.stage,gold:window.Global.gold,frag:window.Global.frag,bomb:window.Global.bomb,skill:[]},t=0;10>t;t++)e.skill[t]=window.Global.skillLevel[t];a.send("SetInfo",e,this.onReceive,this)},onReceive:function(e,t,i,n){n.dataSending=!1,"CreateWXOrder"==e?wx.chooseWXPay({timestamp:i.wxParameters.timeStamp,nonceStr:i.wxParameters.nonceStr,"package":i.wxParameters["package"],signType:i.wxParameters.signType,paySign:i.wxParameters.paySign,success:function(e){switch(n.addMoneyType){case 1:window.Global.gold+=3e3;break;case 2:window.Global.gold+=12e3;break;case 3:window.Global.gold+=25e3;break;case 4:window.Global.gold+=6e4}n.coin.string=window.Global.gold+"",n.sendData()},fail:function(e){alert(JSON.stringify(e))}}):"SetInfo"==e&&1==n.changeStage&&cc.director.loadScene("game")},onPower:function(){window.Global.sound&&cc.audioEngine.playEffect(this.sdClick),this._selectItem(n.power)},onSpeed:function(){window.Global.sound&&cc.audioEngine.playEffect(this.sdClick),this._selectItem(n.speed)},onBase:function(){window.Global.sound&&cc.audioEngine.playEffect(this.sdClick),this._selectItem(n.base)},onDual:function(){window.Global.sound&&cc.audioEngine.playEffect(this.sdClick),this._selectItem(n.dual)},onPierce:function(){window.Global.sound&&cc.audioEngine.playEffect(this.sdClick),this._selectItem(n.pierce)},onCritical:function(){window.Global.sound&&cc.audioEngine.playEffect(this.sdClick),this._selectItem(n.critical)},onFrag:function(){window.Global.sound&&cc.audioEngine.playEffect(this.sdClick),this._selectItem(n.frag)},onBurst:function(){window.Global.sound&&cc.audioEngine.playEffect(this.sdClick),this._selectItem(n.burst)},onBomb:function(){window.Global.sound&&cc.audioEngine.playEffect(this.sdClick),this._selectItem(n.bomb)},onFinal:function(){window.Global.sound&&cc.audioEngine.playEffect(this.sdClick),this._selectItem(n["final"])},onShop:function(){window.Global.sound&&cc.audioEngine.playEffect(this.sdClick),this.shopLayer.active=!0},onUpgrade:function(){var e=s[this._selectId],t=window.Global.skillLevel[this._selectId];window.Global.gold>=e.price[t]?t<e.max&&(window.Global.sound&&cc.audioEngine.playEffect(this.sdBuy),window.Global.gold-=e.price[t],window.Global.skillLevel[this._selectId]++,this._selectId==n["final"]&&(window.Global.skillLevel[n.dual]=5,window.Global.skillLevel[n.burst]=1,window.Global.skillLevel[n.base]=Math.max(40,window.Global.skillLevel[n.base]),window.Global.skillLevel[n.power]=Math.max(40,window.Global.skillLevel[n.power]),window.Global.skillLevel[n.speed]=Math.max(20,window.Global.skillLevel[n.speed]),window.Global.skillLevel[n.pierce]=Math.max(15,window.Global.skillLevel[n.pierce]),window.Global.skillLevel[n.critical]=Math.max(15,window.Global.skillLevel[n.critical]),window.Global.skillLevel[n.frag]=Math.max(20,window.Global.skillLevel[n.frag]),window.Global.skillLevel[n.bomb]=Math.max(5,window.Global.skillLevel[n.bomb]))):(window.Global.sound&&cc.audioEngine.playEffect(this.sdNoMoney),this.shopLayer.active=!0),this.coin.string=window.Global.gold+"",this._updateItem(),this._selectItem(this._selectId)},_checkCanOpen:function(e){switch(e){case n.dual:return window.Global.skillLevel[n.power]>=10;case n.speed:return window.Global.skillLevel[n.power]>=5;case n.frag:return window.Global.skillLevel[n.power]>=10&&window.Global.skillLevel[n.base]>=5;case n.critical:return window.Global.skillLevel[n.dual]>=5;case n.bomb:return window.Global.skillLevel[n.frag]>=5;case n.pierce:return window.Global.skillLevel[n.speed]>=10;case n.burst:return window.Global.skillLevel[n.pierce]>=10&&window.Global.skillLevel[n.critical]>=10;default:return!0}},onAddBomb:function(){window.Global.gold>=this.bombP?(window.Global.sound&&cc.audioEngine.playEffect(this.sdBuy),window.Global.gold-=this.bombP,this.coin.string=window.Global.gold+"",window.Global.bomb++,this.bombCount.string=window.Global.bomb+""):(window.Global.sound&&cc.audioEngine.playEffect(this.sdNoMoney),this.shopLayer.active=!0)},onAddFrag:function(){window.Global.gold>=this.fragP?(window.Global.sound&&cc.audioEngine.playEffect(this.sdBuy),window.Global.gold-=this.fragP,this.coin.string=window.Global.gold+"",window.Global.frag++,this.fragCount.string=window.Global.frag+""):(window.Global.sound&&cc.audioEngine.playEffect(this.sdNoMoney),this.shopLayer.active=!0)},_updateItem:function(){for(var e=0;10>e;e++)this.skillLevel[e].string=window.Global.skillLevel[e]+"",this.skillBtn[e].color=this._checkCanOpen(e)?cc.Color.WHITE:cc.Color.GRAY},_selectItem:function(e){this._selectId=e;var t=s[e],i=o[e],n=window.Global.skillLevel[e];this.selectRect.node.position=this.skillBtn[e].position,this.explain.string=i.d,n==t.max?(this.curLevel.string="当前: "+(t.start+t.each*n)+(t.percent?"%":""),this.nextLevel.string="已满级",
this.needMoney.string="无",this.upgradeString.string="已滿",this.upgrade.node.color=cc.Color.GRAY,this.upgrade.interactable=!1):(this.needMoney.string=t.price[n]+"",this.upgradeString.string="升級",this._checkCanOpen(e)?(this.curLevel.node.color=cc.Color.YELLOW,this.curLevel.string="当前: "+(t.start+t.each*n)+(t.percent?"%":""),this.nextLevel.string="下一级: "+(t.start+t.each*(n+1))+(t.percent?"%d":""),this.nextLevel.node.active=!0,this.upgrade.node.color=cc.Color.WHITE,this.upgrade.interactable=!0):(this.curLevel.node.color=cc.Color.RED,this.curLevel.string="需要: "+i.n1+","+i.n2,this.nextLevel.node.active=!1,this.upgrade.node.color=cc.Color.GRAY,this.upgrade.interactable=!1))},onClose:function(){this.dataSending||(window.Global.sound&&cc.audioEngine.playEffect(this.sdClick),this.shopLayer.active=!1)},onS1:function(){window.Global.sound&&cc.audioEngine.playEffect(this.sdBuy),this._createOrder(1)},onS2:function(){window.Global.sound&&cc.audioEngine.playEffect(this.sdBuy),this._createOrder(2)},onS3:function(){window.Global.sound&&cc.audioEngine.playEffect(this.sdBuy),this._createOrder(3)},onS4:function(){window.Global.sound&&cc.audioEngine.playEffect(this.sdBuy),this._createOrder(4)},_createOrder:function(e){if(!this.dataSending){var t={openid:window.Global.openid};switch(e){case 1:t.desc="海滩英雄 3000金币",t.amount=200;break;case 2:t.desc="海滩英雄 12000金币",t.amount=600;break;case 3:t.desc="海滩英雄 25000金币",t.amount=1e3;break;case 4:t.desc="海滩英雄 60000金币",t.amount=2e3;break;default:return}this.addMoneyType=e,this.dataSending=!0,a.send("CreateWXOrder",t,this.onReceive,this)}}}),cc._RFpop()},{CmdApi:"CmdApi",Types:"Types"}],Types:[function(e,t,i){"use strict";function n(e){for(var t=[],i=0;e>i;i++)t.push(i);return t.sort(function(){return.5-Math.random()}),t}function s(e){var t=window.location.search.split("?"),i=null;if(t[0]==window.location.search);else for(var n=t[1].split("&"),s=0;s<n.length;s++){var o=n[s],a=o.split("=");if(a.length>1&&a[0]==e){i=a[1];break}}return i}cc._RFpush(t,"cd6d4kuf4tA0bvzAJZLsriB","Types");var o=cc.Enum({power:0,speed:1,base:2,dual:3,pierce:4,critical:5,frag:6,burst:7,bomb:8,"final":9}),a=cc.Enum({normal:0,frag:1,bomber:2,shield:3,tank:4}),l=cc.Enum({run:0,atk:1,dying:2,dead:3}),c=[{type:a.normal,speed:100,defend:1,rate:1,maxRun:165,gold:1,range:{x:40,y:50,w:51,h:70}},{type:a.frag,speed:70,defend:1,rate:2,maxRun:470,gold:1,range:{x:50,y:48,w:73,h:93}},{type:a.bomber,speed:130,defend:1,rate:.8,maxRun:160,gold:1,range:{x:40,y:55,w:62,h:70}},{type:a.shield,speed:50,defend:1,rate:1,maxRun:170,gold:1,range:{x:52,y:16,w:61,h:76}},{type:a.tank,speed:100,defend:3,rate:7,maxRun:630,gold:10,range:{x:70,y:75,w:100,h:85}}],r=[{name:"power",max:100,start:100,each:10,pos:{x:0,y:305},percent:!1,price:[50,65,80,95,110,130,150,170,190,215,240,265,290,320,350,380,410,445,480,515,550,590,630,670,710,755,800,845,890,940,1e3,1200,1400,1600,1800,2e3,2200,2400,2600,2800,3e3,3200,3400,3600,3800,4e3,4200,4400,4600,4800,5e3,5500,6e3,6500,7e3,7500,8e3,8500,9e3,9500,1e4,10500,11e3,11500,12e3,12500,13e3,13500,14e3,14500,15e3,15500,16e3,16500,17e3,17500,18e3,18500,19e3,19500,2e4,21500,23e3,24500,26e3,27500,29e3,30500,32e3,33500,35e3,36500,38e3,39500,41e3,42500,44e3,45500,47e3,48500]},{name:"speed",max:30,start:50,each:20,pos:{x:-142,y:248},percent:!1,price:[100,120,140,165,190,220,250,285,320,360,400,445,490,540,590,645,700,760,820,1e3,1500,2e3,3e3,4e3,5e3,6500,8e3,9500,12e3,15e3]},{name:"base",max:100,start:1e3,each:50,pos:{x:142,y:305},percent:!1,price:[800,880,960,1040,1120,1200,1360,1520,1600,1760,1920,2080,2240,2400,2640,2800,3040,3200,3440,3600,3840,4080,4320,4560,4720,5040,5280,5520,5760,6e3,6320,6560,6800,7120,7360,7680,8e3,8240,8560,8880,9200,9440,9760,10080,10400,10720,11040,11440,11760,12080,12400,12720,13120,13440,13840,14160,14560,14880,15280,15600,16e3,16400,16800,17120,17520,17920,18320,18720,19120,19520,19920,20320,20720,21120,21520,22e3,22400,22800,23200,23680,24080,24560,24960,25360,25840,26320,26720,27200,27600,28080,28560,28960,29440,29920,30400,30880,31360,31840,32320,32720]},{name:"dual",max:10,start:55,each:5,pos:{x:0,y:190},percent:!0,price:[3e3,4e3,5500,7500,1e4,13e3,16500,20500,25e3,3e4]},{name:"pierce",max:20,start:0,each:5,pos:{x:-142,y:132},percent:!0,price:[250,400,550,700,850,1e3,1250,1500,1750,2e3,2500,3e3,3500,4e3,4500,5e3,6e3,7e3,8e3,1e4]},{name:"critical",max:20,start:0,each:5,pos:{x:0,y:70},percent:!0,price:[1e3,1250,1500,1750,2e3,2500,3e3,3500,4e3,4500,5e3,6e3,7e3,8e3,9e3,1e4,11500,13e3,14500,16e3]},{name:"frag",max:30,start:500,each:50,pos:{x:142,y:132},percent:!1,price:[500,750,1e3,1250,1500,1750,2e3,2250,2500,2750,3e3,3500,4e3,4500,5e3,5500,6e3,6500,7e3,7500,8e3,8500,9e3,9500,1e4,11e3,12e3,13e3,14e3,15e3]},{name:"burst",max:10,start:65,each:5,pos:{x:-142,y:0},percent:!0,price:[35e3,37e3,39500,42500,46500,51500,57500,64e3,71e3,8e4]},{name:"bomb",max:10,start:1e4,each:-1e3,pos:{x:142,y:0},percent:!1,price:[2e3,2250,2500,2750,3e3,4e3,5e3,6e3,7e3,8e3]},{name:"final",max:1,start:0,each:1,pos:{x:0,y:-55},percent:!1,price:[3e5]}],d=[{n1:"",n2:"",d:"增加枪的伤害值"},{n1:"伤害 Lv.5",n2:"",d:"增加枪的射速"},{n1:"",n2:"",d:"增加基地血量"},{n1:"伤害 Lv.10",n2:"",d:"同时发射2发子弹，每发子弹60%伤害"},{n1:"射速 Lv.10",n2:"",d:"有几率使子弹能够穿透敌人"},{n1:"双管 Lv.5",n2:"",d:"能够有几率产生暴击，造成150%伤害"},{n1:"伤害 Lv.10",n2:"基地 Lv.5",d:"增加手雷的伤害值"},{n1:"穿刺 Lv.10",n2:"暴击 Lv.10",d:"同时发射3发子弹，每发子弹50%伤害"},{n1:"轰炸 Lv.5",n2:"",d:"降低轰炸冷却时间"},{n1:"",n2:"",d:"终极武器, 直接开启价值500,000金币的技能效果"}];Array.prototype.contains=function(e){for(var t=this.length;t--;)if(this[t]===e)return!0;return!1};var h=[{x:-160,y:-203},{x:0,y:-203},{x:160,y:-203},{x:-160,y:-69},{x:0,y:-69},{x:160,y:-69},{x:-160,y:65},{x:0,y:65},{x:160,y:65},{x:-160,y:199},{x:0,y:199},{x:160,y:199},{x:-160,y:333},{x:0,y:333},{x:160,y:333}];t.exports={SkillType:o,EnemyType:a,EnemyState:l,EnemyInfo:c,SkillInfo:r,SkillDesc:d,bombPosition:h,gRandomPos:n,getUrlParam:s},cc._RFpop()},{}],WXSdk:[function(e,t,i){"use strict";function n(e,t,i,n,s,o,a){wx.config({debug:e,appId:t,timestamp:i,nonceStr:n,signature:s,jsApiList:o}),wx.ready(function(){a()}),wx.error(function(){alert("WXinit failed")})}cc._RFpush(t,"18bab3RgZNGnpehWQopwfEH","WXSdk"),t.exports={WXinit:n},cc._RFpop()},{}],gun:[function(e,t,i){"use strict";cc._RFpush(t,"81c52tfzGBPFI7nvJEPerEZ","gun");var n=e("GameMain"),s=e("CurRound");e("Types").EnemyType;cc.Class({"extends":cc.Component,properties:{gunPics:{"default":[],type:[cc.SpriteFrame]},gunFire:cc.Node,gunShell:cc.Node,sdShoot:cc.AudioClip},onLoad:function(){this.gunFire.active=!1,this.gunShell.active=!1,this.playing=!1,this.getComponent(cc.Sprite).spriteFrame=this.gunPics[s.instance.gun-1],this.schedule(this._fire,s.instance.shootSpeed)},update:function(e){},_fire:function(e){if(n.instance.isFire){for(var t=0;t<s.instance.gun;t++){var i=this.node.x,o=-230;2==s.instance.gun?i+=12*(0===t?1:-1):3==s.instance.gun&&(i+=20*t-20),n.instance.bulletMgr.fireRoleBullet(cc.p(i,o))}window.Global.sound&&cc.audioEngine.playEffect(this.sdShoot),this.playing||(3==s.instance.gun&&this.getComponent(cc.Animation).play("gunrun"),this.gunFire.active=!0,this.gunFire.getComponent(cc.Animation).play("gunfire"),this.gunShell.active=!0,this.gunShell.getComponent(cc.Animation).play("gunshell"))}else this.getComponent(cc.Animation).stop("gunrun"),this.gunFire.active=!1,this.gunFire.getComponent(cc.Animation).stop("gunfire"),this.gunShell.active=!1,this.gunShell.getComponent(cc.Animation).stop("gunshell")}}),cc._RFpop()},{CurRound:"CurRound",GameMain:"GameMain",Types:"Types"}]},{},["WXSdk","FragBullet","RoleBullet","GameMain","Bomb","EnemySprite","Logo","gun","BulletMgr","CurRound","Skill","CmdApi","GlobalData","EnemyMgr","Types","ButtonScaler"]);